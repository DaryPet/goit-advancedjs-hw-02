{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nclass Timer {\n  static convertMs = convertMs;\n\n  constructor() {\n    this.userSelectedDate = null;\n    this.countdownInterval = null;\n    this.startButton = document.querySelector('[data-start]');\n    this.dateTimePicker = document.querySelector('#datetime-picker');\n    this.timerDisplay = document.querySelector('.timer');\n\n    this.startButton.disabled = true;\n    this.startButton.addEventListener('click', () => this.startCountdown());\n    this.dateTimePicker.addEventListener('change', () =>\n      this.updateStartButtonState()\n    );\n\n    const options = {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: selectedDates => {\n        this.userSelectedDate = selectedDates[0];\n        this.updateStartButtonState();\n      },\n    };\n\n    flatpickr('#datetime-picker', options);\n  }\n\n  startCountdown() {\n    clearInterval(this.countdownInterval);\n    this.startButton.disabled = true;\n    this.dateTimePicker.disabled = true;\n    const countdown = this.userSelectedDate - new Date();\n    if (countdown > 0) {\n      this.countdownInterval = setInterval(() => {\n        const remainingTime = this.userSelectedDate - new Date();\n        if (remainingTime <= 0) {\n          clearInterval(this.countdownInterval);\n          this.updateTimerDisplay(0);\n          return;\n        }\n        this.updateTimerDisplay(remainingTime);\n      }, 1000);\n    }\n  }\n\n  updateTimerDisplay(remainingTime) {\n    const { days, hours, minutes, seconds } = Timer.convertMs(remainingTime);\n    const formattedDays = this.addLeadingZero(days);\n    const formattedHours = this.addLeadingZero(hours);\n    const formattedMinutes = this.addLeadingZero(minutes);\n    const formattedSeconds = this.addLeadingZero(seconds);\n    const timerDisplay = `${formattedDays}:${formattedHours}:${formattedMinutes}:${formattedSeconds}`;\n    this.timerDisplay.textContent = timerDisplay;\n  }\n\n  addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n  }\n\n  updateStartButtonState() {\n    const currentDate = new Date();\n    if (this.userSelectedDate > currentDate) {\n      this.startButton.disabled = false;\n    } else {\n      this.startButton.disabled = true;\n      if (this.userSelectedDate) {\n        iziToast.warning({\n          title: 'Invalid date',\n          message: 'Please choose a date in the future.',\n        });\n      }\n    }\n  }\n}\n\nconst timer = new Timer();\n"],"names":["convertMs","ms","days","hours","minutes","seconds","_Timer","flatpickr","selectedDates","remainingTime","formattedDays","formattedHours","formattedMinutes","formattedSeconds","timerDisplay","value","currentDate","iziToast","__publicField","Timer"],"mappings":"mRAKA,SAASA,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,MAAMC,EAAN,MAAMA,CAAM,CAGV,aAAc,CACZ,KAAK,iBAAmB,KACxB,KAAK,kBAAoB,KACzB,KAAK,YAAc,SAAS,cAAc,cAAc,EACxD,KAAK,eAAiB,SAAS,cAAc,kBAAkB,EAC/D,KAAK,aAAe,SAAS,cAAc,QAAQ,EAEnD,KAAK,YAAY,SAAW,GAC5B,KAAK,YAAY,iBAAiB,QAAS,IAAM,KAAK,eAAc,CAAE,EACtE,KAAK,eAAe,iBAAiB,SAAU,IAC7C,KAAK,uBAAwB,CACnC,EAaIC,EAAU,mBAXM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,GAAiB,CACxB,KAAK,iBAAmBA,EAAc,CAAC,EACvC,KAAK,uBAAsB,CAC5B,CACP,CAEyC,CACtC,CAED,gBAAiB,CACf,cAAc,KAAK,iBAAiB,EACpC,KAAK,YAAY,SAAW,GAC5B,KAAK,eAAe,SAAW,GACb,KAAK,iBAAmB,IAAI,KAC9B,IACd,KAAK,kBAAoB,YAAY,IAAM,CACzC,MAAMC,EAAgB,KAAK,iBAAmB,IAAI,KAClD,GAAIA,GAAiB,EAAG,CACtB,cAAc,KAAK,iBAAiB,EACpC,KAAK,mBAAmB,CAAC,EACzB,MACD,CACD,KAAK,mBAAmBA,CAAa,CACtC,EAAE,GAAI,EAEV,CAED,mBAAmBA,EAAe,CAChC,KAAM,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKC,EAAM,UAAUG,CAAa,EACjEC,EAAgB,KAAK,eAAeR,CAAI,EACxCS,EAAiB,KAAK,eAAeR,CAAK,EAC1CS,EAAmB,KAAK,eAAeR,CAAO,EAC9CS,EAAmB,KAAK,eAAeR,CAAO,EAC9CS,EAAe,GAAGJ,CAAa,IAAIC,CAAc,IAAIC,CAAgB,IAAIC,CAAgB,GAC/F,KAAK,aAAa,YAAcC,CACjC,CAED,eAAeC,EAAO,CACpB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAED,wBAAyB,CACvB,MAAMC,EAAc,IAAI,KACpB,KAAK,iBAAmBA,EAC1B,KAAK,YAAY,SAAW,IAE5B,KAAK,YAAY,SAAW,GACxB,KAAK,kBACPC,EAAS,QAAQ,CACf,MAAO,eACP,QAAS,qCACnB,CAAS,EAGN,CACH,EA3EEC,EADIZ,EACG,YAAYN,GADrB,IAAMmB,EAANb,EA8Ec,IAAIa"}